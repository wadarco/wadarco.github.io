@layer components {
  :global(.dark) :global(.shiki) .code-container,
  :global(.dark) :global(.shiki) .code-container span {
    color: var(--shiki-dark) !important;
    font-style: var(--shiki-dark-font-style) !important;
    font-weight: var(--shiki-dark-font-weight) !important;
    text-decoration: var(--shiki-dark-text-decoration) !important;
  }

  .code-container {
    container-type: inline-size;
    & code {
      display: block;
      font-family: inherit;
    }
  }

  @container (width > 40em) {
    .code-container:not([data-hide-line-numbers]) code {
      counter-reset: line 0;
      counter-increment: line 0;

      & :global(.line)::before {
        display: inline-block;
        width: 1em;
        margin-right: 1.5em;
        color: color-mix(in oklab, currentColor 40%, transparent);
        content: counter(line);
        counter-increment: line;
      }
    }
  }
}
